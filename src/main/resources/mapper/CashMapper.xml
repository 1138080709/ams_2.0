<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ams.system.dao.CashMapper">
    <resultMap id="BaseResultMap" type="com.ams.system.entity.Cash">
        <id column="cash_id" jdbcType="INTEGER" property="cashId" />
        <result column="info_type" jdbcType="INTEGER" property="infoType" />
        <result column="money" jdbcType="INTEGER" property="money" />
        <result column="remark" jdbcType="VARCHAR" property="remark" />
        <result column="proposer_id" jdbcType="INTEGER" property="proposerId" />
        <result column="applicate_time" jdbcType="TIMESTAMP" property="applicateTime" />
        <result column="auditor_id" jdbcType="INTEGER" property="auditorId" />
        <result column="audit_flag" jdbcType="INTEGER" property="auditFlag" />
        <result column="execute_flag" jdbcType="INTEGER" property="executeFlag" />
    </resultMap>

    <resultMap id="BaseResultMap_1" type="com.ams.system.entity.Cash">
        <id column="cash_id" jdbcType="INTEGER" property="cashId" />
        <result column="info_type" jdbcType="INTEGER" property="infoType" />
        <result column="money" jdbcType="INTEGER" property="money" />
        <result column="remark" jdbcType="VARCHAR" property="remark" />
        <result column="proposer_id" jdbcType="INTEGER" property="proposerId" />
        <result column="applicate_time" jdbcType="TIMESTAMP" property="applicateTime" />
        <result column="auditor_id" jdbcType="INTEGER" property="auditorId" />
        <result column="audit_flag" jdbcType="INTEGER" property="auditFlag" />
        <result column="execute_flag" jdbcType="INTEGER" property="executeFlag" />
        <association property="proposer" column="proposer_id" select="com.ams.system.dao.StudentMapper.selectByPrimaryKey"/>
        <association property="auditor" column="auditor_id" select="com.ams.system.dao.StudentMapper.selectByPrimaryKey"/>
    </resultMap>

    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select cash_id, info_type, money, remark, proposer_id, applicate_time, auditor_id, 
        audit_flag, execute_flag
        from cash
        where cash_id = #{cashId,jdbcType=INTEGER}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        select cash_id, info_type, money, remark, proposer_id, applicate_time, auditor_id, 
        audit_flag, execute_flag
        from cash
    </select>

    <select id="selectAllWithQuery" parameterType="com.ams.system.entity.Cash" resultMap="BaseResultMap_1">
        select cash_id, info_type, money, remark, proposer_id, applicate_time, auditor_id,
        audit_flag, execute_flag
        from cash
        where 1=1
        <if test="infoType != null and infoType != ''">
            and info_type = #{infoType}
        </if>
        <if test="money != null and money != ''">
            and money = #{money}
        </if>
        <if test="remark != null and remark != ''">
            and remark like "%"#{remark}"%"
        </if>
        <if test="proposerId != null and proposerId != ''">
            and proposer_id = #{proposerId}
        </if>
        <if test="applicateTime != null and applicateTime != ''">
            and applicate_time = #{applicateTime}
        </if>
        <if test="auditorId != null and auditorId != ''">
            and auditor_id = #{auditorId}
        </if>
        <if test="auditFlag != null and auditFlag != ''">
            and audit_flag = #{auditFlag}
        </if>
        <if test="executeFlag != null and executeFlag != ''">
            and execute_flag = #{executeFlag}
        </if>
    </select>

    <insert id="insert" keyColumn="cash_id" keyProperty="cashId" parameterType="com.ams.system.entity.Cash" useGeneratedKeys="true">
        insert into cash (info_type, money, remark, proposer_id, 
          auditor_id
          )
        values ( #{infoType,jdbcType=INTEGER}, #{money,jdbcType=INTEGER}, #{remark,jdbcType=VARCHAR},
          #{proposerId,jdbcType=INTEGER}, #{auditorId,jdbcType=INTEGER}
          )
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.ams.system.entity.Cash">
        update cash
        <set>
            <if test="infoType != null and infoType != ''">
                info_type = #{infoType,jdbcType=INTEGER},
            </if>
            <if test="money != null and money != ''">
                money = #{money,jdbcType=INTEGER},
            </if>
            <if test="remark != null and remark != ''">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="proposerId != null and proposerId != ''">
                proposer_id = #{proposerId,jdbcType=INTEGER},
            </if>
            <if test="applicateTime != null and applicateTime != ''">
                applicate_time = #{applicateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="auditorId != null and auditorId != ''">
                auditor_id = #{auditorId,jdbcType=INTEGER},
            </if>
            <if test="auditFlag != null and auditFlag != ''">
                audit_flag = #{auditFlag,jdbcType=INTEGER},
            </if>
            <if test="executeFlag != null and executeFlag != ''">
                execute_flag = #{executeFlag,jdbcType=INTEGER}
            </if>
        </set>
        where cash_id = #{cashId,jdbcType=INTEGER}
    </update>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        delete from cash
        where cash_id = #{cashId,jdbcType=INTEGER}
    </delete>

    <select id="selectCashAuditsWithQuery" parameterType="com.ams.system.entity.Cash" resultMap="BaseResultMap_1">
        select cash_id, info_type, money, remark, proposer_id, applicate_time, auditor_id,
        audit_flag, execute_flag
        from cash
        where audit_flag = 0
        <if test="infoType != null and infoType != ''">
            and info_type = #{infoType}
        </if>
        <if test="money != null and money != ''">
            and money = #{money}
        </if>
        <if test="remark != null and remark != ''">
            and remark like "%"#{remark}"%"
        </if>
        <if test="proposerId != null and proposerId != ''">
            and proposer_id = #{proposerId}
        </if>
        <if test="applicateTime != null and applicateTime != ''">
            and applicate_time = #{applicateTime}
        </if>
    </select>

    <select id="selectCashExecutesWithQuery" parameterType="com.ams.system.entity.Cash" resultMap="BaseResultMap_1">
        select cash_id, info_type, money, remark, proposer_id, applicate_time, auditor_id,
        audit_flag, execute_flag
        from cash
        where execute_flag = 0 
        and audit_flag = 1
        <if test="infoType != null and infoType != ''">
            and info_type = #{infoType}
        </if>
        <if test="money != null and money != ''">
            and money = #{money}
        </if>
        <if test="remark != null and remark != ''">
            and remark like "%"#{remark}"%"
        </if>
        <if test="proposerId != null and proposerId != ''">
            and proposer_id = #{proposerId}
        </if>
        <if test="applicateTime != null and applicateTime != ''">
            and applicate_time = #{applicateTime}
        </if>
        <if test="auditorId != null and auditorId != ''">
            and auditor_id = #{auditorId,jdbcType=INTEGER}
        </if>
    </select>
</mapper>
